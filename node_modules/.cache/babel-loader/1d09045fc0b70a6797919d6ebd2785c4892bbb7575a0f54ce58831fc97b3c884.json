{"ast":null,"code":"var _jsxFileName = \"/home/oem/projetos/sd-027-a-project-trybetunes/src/components/MusicCard.jsx\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { addSong, getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\nimport Loading from './Loading';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass MusicCard extends Component {\n  constructor() {\n    super();\n    this.musicFavorite = async _ref => {\n      let {\n        target: {\n          checked\n        }\n      } = _ref;\n      const {\n        music\n      } = this.props;\n      this.setState({\n        loading: true\n      });\n      if (checked) {\n        await addSong(music);\n      }\n      this.setState({\n        loading: false,\n        favorita: checked\n      });\n    };\n    this.favoritMusic = async () => {\n      const {\n        music: {\n          trackId\n        }\n      } = this.props;\n      const songs = await getFavoriteSongs();\n      return songs.map(song => song.trackId).includes(trackId);\n    };\n    this.state = {\n      loading: false,\n      favorita: false\n    };\n  }\n  async componentDidMount() {\n    this.setState({\n      favorita: await this.favoritMusic()\n    });\n  }\n  render() {\n    const {\n      music: {\n        trackName,\n        previewUrl,\n        trackId\n      }\n    } = this.props;\n    const {\n      loading,\n      favorita\n    } = this.state;\n    if (loading) return /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 25\n    }, this);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: trackName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n        \"data-testid\": \"audio-component\",\n        src: previewUrl,\n        controls: true,\n        children: [/*#__PURE__*/_jsxDEV(\"track\", {\n          kind: \"captions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this), \"O seu navegador n\\xE3o suporta o elemento\", ' ', /*#__PURE__*/_jsxDEV(\"code\", {\n          children: \"audio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), \".\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: trackId,\n        children: [\"Favorita\", /*#__PURE__*/_jsxDEV(\"input\", {\n          \"data-testid\": `checkbox-music-${trackId}`,\n          type: \"checkbox\",\n          id: trackId,\n          name: \"favorita\",\n          onChange: this.musicFavorite,\n          checked: favorita\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: loading && /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 24\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this);\n  }\n}\nMusicCard.propTypes = {\n  music: PropTypes.shape({\n    trackName: PropTypes.string.isRequired,\n    previewUrl: PropTypes.string.isRequired,\n    trackId: PropTypes.string.isRequired\n  })\n}.isRequired;\nexport default MusicCard;","map":{"version":3,"names":["React","Component","PropTypes","addSong","getFavoriteSongs","removeSong","Loading","MusicCard","constructor","musicFavorite","target","checked","music","props","setState","loading","favorita","favoritMusic","trackId","songs","map","song","includes","state","componentDidMount","render","trackName","previewUrl","propTypes","shape","string","isRequired"],"sources":["/home/oem/projetos/sd-027-a-project-trybetunes/src/components/MusicCard.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { addSong, getFavoriteSongs, removeSong  } from '../services/favoriteSongsAPI';\nimport Loading from './Loading';\n\nclass MusicCard extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      loading: false,\n      favorita: false,\n    };\n  }\n\n  async componentDidMount() {\n    this.setState({\n      favorita: await this.favoritMusic(),\n\n    });\n  }\n\n  musicFavorite = async ({ target: { checked } }) => {\n    const { music } = this.props;\n    this.setState({\n      loading: true,\n    });\n\n    if (checked) {\n      await addSong(music);\n    }\n    this.setState({\n      loading: false,\n      favorita: checked,\n    });\n  };\n\n  favoritMusic = async () => {\n    const { music: { trackId } } = this.props;\n    const songs = await getFavoriteSongs();\n    return songs.map((song) => song.trackId).includes(trackId);\n  };\n\n  render() {\n    const { music: { trackName, previewUrl, trackId } } = this.props;\n    const { loading, favorita } = this.state;\n\n    if (loading) return <Loading />;\n    return (\n      <div>\n        <p>{trackName}</p>\n        <audio data-testid=\"audio-component\" src={ previewUrl } controls>\n          <track kind=\"captions\" />\n          O seu navegador n√£o suporta o elemento\n          {' '}\n\n          <code>audio</code>\n          .\n        </audio>\n        <label htmlFor={ trackId }>\n          Favorita\n          <input\n            data-testid={ `checkbox-music-${trackId}` }\n            type=\"checkbox\"\n            id={ trackId }\n            name=\"favorita\"\n            onChange={ this.musicFavorite }\n            checked={ favorita }\n          />\n        </label>\n        <div>\n          { loading && <Loading /> }\n        </div>\n      </div>\n    );\n  }\n}\n\nMusicCard.propTypes = {\n  music: PropTypes.shape({\n    trackName: PropTypes.string.isRequired,\n    previewUrl: PropTypes.string.isRequired,\n    trackId: PropTypes.string.isRequired,\n  }),\n}.isRequired;\n\nexport default MusicCard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}